defaults:
  path-prefix:         '<OCR_GT_BASEDIR>/../example'
  correction-root:     '/ocr-corrections'
  images-root:         '/fileadmin'
  correction-filename: 'correction.html'
  comments-filename:   'anmerkungen.txt'
  debuglog:            '/tmp/ocr-gt.log'
  url-prefix:          'http://localhost:9090'

pattern:
  - |
    https?://digi.bib.uni-mannheim.de
    /fileadmin
    /(?<collection>[^/]+)
    /(?<work>[^/]+)
    /[^\/]+
    /[^_]+_(?<page>\d+)
    .*
  - |
    /(?<collection>[^/]+)
    /(?<work>[^/]+)
    /gt
    /(?<page>[^/]+)
    /[^/]+
    $
  - |
    /(?<collection>[^/]+)
    /(?<work>[^/]+)
    /(?<page>[^/]+)
    $


# in this order
template:
  url:
    thumb-url:      '<url-prefix><images-root>/<collection>/<work>/thumb/<work>_<page>.jpg'
    hires-url:      '<url-prefix><images-root>/<collection>/<work>/max/<work>_<page>.jpg'
    alto-url:       '<url-prefix><images-root>/<collection>/<work>/alto/<work>_<page>.alto'
    correction-url: '<url-prefix><correction-root>/<collection>/<work>/gt/<page>/<correction-filename>'
    comment-url:    '<url-prefix><correction-root>/<collection>/<work>/gt/<page>/<comments-filename>'
  path:
    correction-dir:        '<path-prefix><correction-root>/<collection>/<work>/gt/<page>'
    correction-file:       '<path-prefix><correction-root>/<collection>/<work>/gt/<page>/<correction-filename>'
    comment-file:          '<path-prefix><correction-root>/<collection>/<work>/gt/<page>/<comments-filename>'
    hocr-file:             '<path-prefix><images-root>/<collection>/<work>/hocr/<work>_<page>.hocr'
    hires-dir:             '<path-prefix><images-root>/<collection>/<work>/max'
    hires-file:            '<path-prefix><images-root>/<collection>/<work>/max/<work>_<page>.jpg'
  query:
    corrections-for-work: >
      <path-prefix><correction-root>/<collection>/<work>
      -type f
      -name "<correction-filename>"
  command:
    hocr-extract-images: >
      cd <correction-dir> &&
      <OCR_GT_BASEDIR>/vendor/hocr-tools/hocr-extract-images
      -b '<hires-dir>' '<hocr-file>'
      2>&1 >> <debuglog>
    # ocropusGtedit sollte vom uebergeordneten Verzeichnis aufgerufen werden,
    # sonst haben nachgeordnete Scripte probleme weil Verzeichnisname in correction.html
    # nicht enthalten ist Vergleiche Issue #22
    ocropus-gtedit: >
      cd <correction-dir>/..  &&
      <OCR_GT_BASEDIR>/vendor/ocropy/ocropus-gtedit
      'html' -x xxx <page>/line*.png -o "<page>/<correction-filename>"
      2>&1 >><debuglog> 
